---
pagination:
  data: products
  size: 1
  alias: product
permalink: "/products/{{ product.name }}/index.html"
---

{% extends "layouts/base.njk" %}

{% block content %}

<div class="section-light">

  <div
    x-data="shop" 
    x-effect="syncCart"
    class="grid-layout">

    <!--Show Cart-->
    <button
      class="cart__Button"
      x-cloak 
      @click="openCart()">
      <img src="../../assets/medias/imgs/basket.svg" alt="">
      <span x-text="totalProducts" class="cart__number"></span>
    </button>

    <h1 class="title product__title">{{ product.name }}</h1>

    <div 
      class="product__img" 
      style="background-image: url('{{ product.image }}');"
      >
      <a class="backToShop" href="/shop.html"> <<< back to shop</a>
    </div>

    <div 
      class="product__subimg" 
      style="background-image: url('{{ product.image }}');"
      >
    </div>

    <div class="about textblock">
      <h2 class="about__subtitle">About it</h2>
      <p class="core about__text">Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Cras consectetur, ante vel commodo tristique, odio urna tincidunt dui, nec semper turpis felis in odio. 
        Duis imperdiet lacus lorem, eu hendrerit neque consectetur sed. Nunc suscipit rhoncus massa. Quisque vel risus quis nisl feugiat vehicula.</p>
    </div>

    <div class="product__buy">
      <h2 class="subtitle">Buy this item</h2> <br> <br>
      {% for item in product.sizes %}
        {% if loop.first %}<ul class="buy__sizes">{% endif %}
          <li class="buy__item">
            <button 
                x-cloak
                @click="addToCart($el.dataset)" 
                data-priceid="{{ item.priceId }}"
                data-name="{{ item.name }}"
                data-quantity="1"
                data-id= {{item.id}}
                class="buy__size"
                {% if item.quantityLeft <= 0 %}disabled{% endif %}
                >
                {{item.size}}
            </button>
            <p class="product__price">{{item.priceDisplay}}</p>
          </li>
        {% if loop.last %}</ul>{% endif %}
      {% endfor %}
    </div>

    <div class="info textblock">
      <h2 class="info__subtitle">Product info</h2>
      <p class="core info__text">Oversized Fit
        Double-sided fabric 100% polyester
        Details 100% nylon</p>
    </div>

    <div class="wash textblock">
      <h2 class="wash__subtitle">Washing info</h2>
      <p class="core wash__text">Our garments are preferred to be washed with Dash.</p>
    </div>

    <div class="shipping textblock">
      <h2 class="shipping__subtitle">Shipping info</h2>
      <p class="core shipping__text">Your order will be shipped by November 8, 2024.
        Customs & Brexit info can be found here
        Please visit our help center if you have any questions</p>
    </div>

    <!--CART-->
    <dialog data-cart>
        <p><span x-text="totalProducts"></span> products in your cart</p>
        <template 
          x-for="(item, index) in products" 
          :key="item.id">
          <div>
            <h2 x-text="item.name"></h2>
            <p>
              Quantity: 
              <input 
                type="number" 
                min="1" 
                max="10" 
                value="item.quantity" 
                x-model.number="item.quantity" />
              <button @click="deleteFromCart(item.id)">Delete</button>
            </p>
          </div>
        </template>
        <p>
          <button @click="closeCart">Continue Shopping</button>
          <button x-show="products.length" @click="checkout">Checkout</button>
          <button @click="updateProductQuantity">success</button>
        </p>
    </dialog>

  </div>

</div>

{% endblock %}